<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Panel de administración para gestionar el blog de Colmenares Saavedra Armijo SPA. Administra publicaciones, etiquetas y contenido del sitio web." />
    <title>Panel de Administración - Colmenares Saavedra Armijo SPA</title>
    <!-- Precargar recursos críticos -->
    <link rel="preload" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" as="style">
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap" as="style">
    <link rel="preload" href="https://fonts.googleapis.com/icon?family=Material+Icons" as="style">
    
    <!-- Cargar estilos con atributos de rendimiento -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous" media="print" onload="this.media='all'">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet" media="print" onload="this.media='all'">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" media="print" onload="this.media='all'">
    <link rel="stylesheet" href="blog-styles.css" media="print" onload="this.media='all'">
    <link rel="stylesheet" href="admin.css" media="print" onload="this.media='all'">
    
    <!-- CKEditor CDN -->
    <script src="https://cdn.ckeditor.com/ckeditor5/40.1.0/classic/ckeditor.js"></script>
</head>
<body class="text-secondary">
    <header class="bg-verde text-white shadow-lg">
        <div class="container py-3">
            <div class="d-flex align-items-center justify-content-between">
                <div class="d-flex align-items-center">
                    <img alt="Logotipo Colmenares Saavedra Armijo SPA - Abeja en un panal" class="h-16 me-2 me-md-3" src="imagenes/logocafe.png" loading="eager" style="height: clamp(2.5rem, 4vw, 4rem);" />
                    <h1 class="fs-5 fs-md-4 fw-bold mb-0 d-none d-sm-block">Panel de Administración</h1>
                    <h1 class="fs-6 fw-bold mb-0 d-block d-sm-none">Admin</h1>
                </div>
                
                <!-- Botón hamburguesa para móviles -->
                <button class="navbar-toggler d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                
                <!-- Navegación desktop -->
                <nav class="d-none d-md-block">
                    <ul class="nav">
                        <li class="nav-item">
                            <a class="nav-link text-white hover-accent" href="index1.html">Ver Sitio</a>
                        </li>
                        <li class="nav-item">
                            <button id="logoutButton" class="btn btn-outline-cafe ms-3" onclick="logout()">
                                <span class="material-icons me-2">logout</span>
                                Cerrar Sesión
                            </button>
                        </li>
                    </ul>
                </nav>
            </div>
            
            <!-- Navegación móvil colapsable -->
            <div class="collapse navbar-collapse d-md-none" id="navbarNav">
                <ul class="nav flex-column mt-3">
                    <li class="nav-item">
                        <a class="nav-link text-white hover-accent" href="index1.html">Ver Sitio</a>
                    </li>
                    <li class="nav-item mt-2">
                        <button id="logoutButton-mobile" class="btn btn-outline-cafe" onclick="logout()">
                            <span class="material-icons me-2">logout</span>
                            Cerrar Sesión
                        </button>
                    </li>
                </ul>
            </div>
        </div>
    </header>

    <main>
        <section class="admin-header">
            <div class="container">
                <h1 class="admin-title text-center">Gestión de Contenido</h1>
                <p class="admin-description text-center">
                    Administra las publicaciones, etiquetas y contenido del blog de Colmenares Saavedra Armijo SPA.
                </p>
                
                <!-- Menú de navegación -->
                <nav class="admin-nav mt-4">
                    <ul class="nav nav-pills justify-content-center flex-wrap">
                        <li class="nav-item">
                            <a class="nav-link active" href="#dashboard" data-bs-toggle="pill">
                                <span class="material-icons me-1 me-md-2">dashboard</span>
                                <span class="d-none d-sm-inline">Dashboard</span>
                                <span class="d-inline d-sm-none">Dash</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#posts" data-bs-toggle="pill">
                                <span class="material-icons me-1 me-md-2">article</span>
                                <span class="d-none d-sm-inline">Publicaciones</span>
                                <span class="d-inline d-sm-none">Posts</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#categories" data-bs-toggle="pill">
                                <span class="material-icons me-1 me-md-2">category</span>
                                <span class="d-none d-sm-inline">Etiquetas</span>
                                <span class="d-inline d-sm-none">Tags</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#images" data-bs-toggle="pill">
                                <span class="material-icons me-1 me-md-2">photo_library</span>
                                <span class="d-none d-sm-inline">Imágenes</span>
                                <span class="d-inline d-sm-none">Imgs</span>
                            </a>
                        </li>
                    </ul>
                </nav>
            </div>
        </section>

        <section class="py-5 bg-light">
            <div class="container">
                <div class="tab-content">
                    <!-- Dashboard Tab -->
                    <div class="tab-pane fade show active" id="dashboard">
                        <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-3 g-md-4">
                            <!-- Card Estadísticas -->
                            <div class="col">
                                <div class="card admin-card">
                                    <div class="card-body text-center">
                                        <span class="material-icons admin-icon">check_circle</span>
                                        <h4 class="card-title text-accent my-2">Publicados</h4>
                                        <p class="card-text fs-1 fw-bold text-verde" id="totalPostsPublicados">0</p>
                                        <p class="card-text">Total de posts publicados</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col">
                                <div class="card admin-card">
                                    <div class="card-body text-center">
                                        <span class="material-icons admin-icon">save</span>
                                        <h4 class="card-title text-accent my-2">Guardados</h4>
                                        <p class="card-text fs-1 fw-bold text-amarillo" id="totalPostsBorradores">0</p>
                                        <p class="card-text">Total de posts guardados</p>
                                    </div>
                                </div>
                            </div>

                            <!-- Card Categorías -->
                            <div class="col">
                                <div class="card admin-card">
                                    <div class="card-body text-center">
                                        <span class="material-icons admin-icon">category</span>
                                        <h4 class="card-title text-accent my-2">Etiquetas</h4>
                                        <p class="card-text fs-1 fw-bold text-verde" id="totalCategories">0</p>
                                        <p class="card-text">Categorías activas</p>
                                    </div>
                                </div>
                            </div>

                            <!-- Card Acciones Rápidas -->
                            <div class="col">
                                <div class="card admin-card">
                                    <div class="card-body text-center">
                                        <span class="material-icons admin-icon">add_circle</span>
                                        <h4 class="card-title text-accent my-2">Acciones</h4>
                                        <div class="d-grid gap-2">
                                            <button class="btn btn-cafe" data-bs-toggle="modal" data-bs-target="#crearPostModal">
                                                <span class="material-icons me-1 me-md-2">add</span>
                                                <span class="d-none d-sm-inline">Nueva Publicación</span>
                                                <span class="d-inline d-sm-none">Nuevo Post</span>
                                            </button>
                                            <button class="btn btn-outline-cafe" data-bs-toggle="modal" data-bs-target="#crearCategoriaModal">
                                                <span class="material-icons me-1 me-md-2">category</span>
                                                <span class="d-none d-sm-inline">Nueva Etiqueta</span>
                                                <span class="d-inline d-sm-none">Nueva Tag</span>
                                            </button>
                                            <!-- Botón para subir nueva imagen -->
                                            <button class="btn btn-outline-cafe" data-bs-toggle="modal" data-bs-target="#subirImagenModal">
                                                <span class="material-icons me-1 me-md-2">upload</span>
                                                <span class="d-none d-sm-inline">Subir nueva imagen</span>
                                                <span class="d-inline d-sm-none">Subir Img</span>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Posts Tab -->
                    <div class="tab-pane fade" id="posts">
                        <div class="d-flex justify-content-between align-items-center mb-4 flex-column flex-md-row gap-3">
                            <h2 class="h4 mb-0">Gestión de Publicaciones</h2>
                            <button class="btn btn-cafe" data-bs-toggle="modal" data-bs-target="#crearPostModal">
                                <span class="material-icons me-1 me-md-2">add</span>
                                <span class="d-none d-sm-inline">Nueva Publicación</span>
                                <span class="d-inline d-sm-none">Nuevo Post</span>
                            </button>
                        </div>
                        
                        <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-3 g-md-4" id="postsContainer">
                            <!-- Las publicaciones se cargarán dinámicamente aquí -->
                        </div>
                    </div>

                    <!-- Categories Tab -->
                    <div class="tab-pane fade" id="categories">
                        <div class="d-flex justify-content-between align-items-center mb-4 flex-column flex-md-row gap-3">
                            <h2 class="h4 mb-0">Gestión de Etiquetas</h2>
                            <button class="btn btn-cafe" data-bs-toggle="modal" data-bs-target="#crearCategoriaModal">
                                <span class="material-icons me-1 me-md-2">add</span>
                                <span class="d-none d-sm-inline">Nueva Etiqueta</span>
                                <span class="d-inline d-sm-none">Nueva Tag</span>
                            </button>
                        </div>
                        
                        <div class="table-responsive">
                            <table class="table table-hover">
                                <thead>
                                    <tr>
                                        <th>ID</th>
                                        <th>Nombre</th>
                                        <th>Acciones</th>
                                    </tr>
                                </thead>
                                <tbody id="categoriasTableBody">
                                    <!-- Las categorías se cargarán dinámicamente aquí -->
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Images Tab -->
                    <div class="tab-pane fade" id="images">
                        <div class="d-flex justify-content-between align-items-center mb-4 flex-column flex-md-row gap-3">
                            <h2 class="h4 mb-0">Gestión de Imágenes</h2>
                            <button class="btn btn-cafe" data-bs-toggle="modal" data-bs-target="#subirImagenModal">
                                <span class="material-icons me-1 me-md-2">upload</span>
                                <span class="d-none d-sm-inline">Subir imagen</span>
                                <span class="d-inline d-sm-none">Subir</span>
                            </button>
                        </div>
                        
                        <!-- Filtros de imágenes -->


                        <!-- Grid de imágenes -->
                        <div class="row row-cols-1 row-cols-md-3 row-cols-lg-4 g-4" id="imagenesGrid">
                            <!-- Las imágenes se cargarán dinámicamente aquí -->
                        </div>

                        <!-- Mensaje cuando no hay imágenes -->
                        <div id="mensajeNoImagenes" class="text-center py-5 d-none">
                            <span class="material-icons text-gris" style="font-size: 4rem;">photo_library</span>
                            <h4 class="text-gris mt-3">No hay imágenes disponibles</h4>
                            <p class="text-gris">Sube tu primera imagen para comenzar</p>
                            <button class="btn btn-cafe" data-bs-toggle="modal" data-bs-target="#subirImagenModal">
                                <span class="material-icons me-2">upload</span>
                                Subir Primera Imagen
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Botón Volver arriba -->
    <button id="btn-volver-arriba" class="btn btn-cafe rounded-circle position-fixed bottom-0 end-0 m-4 d-none" aria-label="Volver arriba">
        <span class="material-icons">arrow_upward</span>
    </button>

    <footer class="blog-footer">
        <div class="container text-center">
            <div class="mb-4">
                <img alt="Logotipo Colmenares Saavedra Armijo SPA en pie de página - Abeja dorada" class="mb-3" src="imagenes/logocafe.png" style="height: 3.5rem;"/>
                <p class="fs-4 fw-semibold mb-0 text-verde">Colmenares Saavedra Armijo SPA</p>
                <p class="fs-6 text-gris">Melipilla, Chile</p>
            </div>
            <div class="mb-4 fs-5">
                <a href="mailto:contacto@colmenaressaavedra.cl" class="text-cafe">contacto@colmenaressaavedra.cl</a>
                <span class="mx-3 text-gris">|</span>
                <a href="tel:+56912345678" class="text-cafe">+56 9 1234 5678</a>
            </div>
            <p class="fs-6 mb-0 text-gris">&copy; 2025 Colmenares Saavedra Armijo SPA. Todos los derechos reservados.</p>
        </div>
    </footer>

    <!-- Modal para crear categoría/etiquetas -->
    <div class="modal fade" id="crearCategoriaModal" tabindex="-1" aria-labelledby="crearCategoriaModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="crearCategoriaModalLabel">Crear Nueva Etiqueta</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
                </div>
                <div class="modal-body">
                    <form id="newCategoriaForm">
                        <div class="mb-3">
                            <label for="nomCategoria" class="form-label">Nombre de la etiqueta</label>
                            <input type="text" class="form-control" id="nomCategoria" required>
                        </div>
                        <button type="submit" class="btn btn-cafe">
                            <span class="material-icons me-2">save</span>
                            Guardar
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </div>



    <!-- Modal para confirmar eliminación de categoría -->
    <div class="modal fade" id="confirmarEliminarCategoriaModal" tabindex="-1" aria-labelledby="confirmarEliminarCategoriaModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="confirmarEliminarCategoriaModalLabel">Confirmar eliminación</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
                </div>
                <div class="modal-body">
                    <p>¿Estás seguro de que deseas eliminar esta etiqueta?</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-danger" id="confirmarEliminarCategoriaBtn">
                        <span class="material-icons me-2">delete</span>
                        Eliminar
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal para crear un nuevo post -->
    <div class="modal fade" id="crearPostModal" tabindex="-1" aria-labelledby="crearPostModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="crearPostModalLabel" style="color: var(--color-cafe);">Crear Nuevo Post</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
                </div>

                <form id="crearPostForm">
                    <div class="modal-body">
                        <!-- Sección de Imagen Principal (PRIMERA) -->
                        <div class="mb-4">
                            <label class="form-label fw-bold">Imagen Principal del Post *</label>
                            <div class="row">
                                <div class="col-md-12">
                                    <div class="card">
                                        <div class="card-header">
                                            <h6 class="mb-0">Seleccionar imagen existente</h6>
                                        </div>
                                        <div class="card-body">
                                            <div class="imagenes-contenido-scroll-container">
                                                <div class="imagenes-contenido-list" id="imagenesPrincipalesContainer" tabindex="0">
                                                    <!-- Las imágenes se cargarán dinámicamente aquí -->
                                                </div>
                                            </div>
                                            <div id="previewImagenPrincipalExistente" class="mt-3"></div>
                                            <div class="form-text mt-2" id="mensajeImagenesDisponibles">
                                                Selecciona una imagen existente de la carpeta de posts
                                            </div>
                                            <div id="alertaNoImagenes" class="alert alert-danger mt-3 d-none">
                                                No puedes crear un post porque no hay imágenes disponibles. Sube una imagen desde la pestaña Imágenes.
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="form-text mt-2">La imagen principal se mostrará como destacada en el post. Haz clic en una imagen para seleccionarla.</div>
                        </div>

                        <div class="mb-3">
                            <label for="tituloPost" class="form-label">Título *</label>
                            <input type="text" class="form-control" id="tituloPost" name="titulo" required>
                        </div>

                        <div class="mb-3">
                            <label for="contenidoPost" class="form-label">Contenido *</label>
                            <div id="contenidoPost" class="form-control" style="min-height: 300px;"></div>
                            <div class="form-text">Escribe el contenido de tu post usando el editor avanzado</div>
                        </div>

                        <!-- Sección para insertar imágenes en el contenido -->
                        <div class="mb-3">
                            <label class="form-label">Insertar Imágenes en el Contenido</label>
                            <div class="card">
                                <div class="card-header">
                                    <h6 class="mb-0">Imágenes disponibles</h6>
                                </div>
                                <div class="card-body">
                                    <div class="row" id="imagenesContenidoContainer">
                                        <!-- Las imágenes se cargarán dinámicamente aquí -->
                                    </div>
                                    <div class="form-text mt-2">
                                        Haz clic en una imagen para insertarla centrada en el contenido del post
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-12">
                                <div class="mb-3">
                                    <label for="estadoPost" class="form-label">Estado *</label>
                                    <select class="form-select" id="estadoPost" name="id_estado" required>
                                        <option value="">Seleccionar estado...</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <div class="mb-3">
                            <label for="categoriasPost" class="form-label">Categorías/Etiquetas</label>
                            <select class="form-select" id="categoriasPost" name="categorias" multiple>
                                <!-- Las categorías se cargarán dinámicamente -->
                            </select>
                            <div class="form-text">Mantén presionado Ctrl (Cmd en Mac) para seleccionar múltiples categorías</div>
                        </div>
                    </div>

                    <div class="modal-footer">
                        <button type="button" class="btn btn-outline-gris" data-bs-dismiss="modal">Cancelar</button>
                        <button type="submit" class="btn btn-cafe">
                            <span class="material-icons me-2">save</span>
                            Guardar Post
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Modal para editar post -->
    <div class="modal fade" id="editarPostModal" tabindex="-1" aria-labelledby="editarPostModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="editarPostModalLabel" style="color: var(--color-cafe);">Editar Post</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
                </div>

                <form id="editarPostForm">
                    <div class="modal-body">
                        <input type="hidden" id="postIdEditar" name="id_post">
                        
                        <!-- Sección de Imagen Principal (PRIMERA) -->
                        <div class="mb-4">
                            <label class="form-label fw-bold">Imagen Principal del Post *</label>
                            <div class="row">
                                <div class="col-md-12">
                                    <div class="card">
                                        <div class="card-header">
                                            <h6 class="mb-0">Seleccionar imagen existente</h6>
                                        </div>
                                        <div class="card-body">
                                            <div class="imagenes-contenido-scroll-container">
                                                <div class="imagenes-contenido-list" id="imagenesPrincipalesContainerEditar" tabindex="0">
                                                    <!-- Las imágenes se cargarán dinámicamente aquí -->
                                                </div>
                                            </div>
                                            <div id="previewImagenExistenteEditar" class="mt-3"></div>
                                            <div class="form-text mt-2" id="mensajeImagenesDisponiblesEditar">
                                                Selecciona una imagen existente de la carpeta de posts
                                            </div>
                                            <div id="alertaNoImagenesEditar" class="alert alert-danger mt-3 d-none">
                                                No puedes editar el post porque no hay imágenes disponibles. Sube una imagen desde la pestaña Imágenes.
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="form-text mt-2">La imagen principal se mostrará como destacada en el post. Haz clic en una imagen para seleccionarla.</div>
                        </div>

                        <div class="mb-3">
                            <label for="tituloEditar" class="form-label">Título *</label>
                            <input type="text" class="form-control" id="tituloEditar" name="titulo" required>
                        </div>

                        <div class="mb-3">
                            <label for="contenidoEditar" class="form-label">Contenido *</label>
                            <div id="contenidoEditar" class="form-control" style="min-height: 300px;"></div>
                            <div class="form-text">Escribe el contenido de tu post usando el editor avanzado</div>
                        </div>

                        <!-- Sección para insertar imágenes en el contenido -->
                        <div class="mb-3">
                            <label class="form-label">Insertar Imágenes en el Contenido</label>
                            <div class="card">
                                <div class="card-header">
                                    <h6 class="mb-0">Imágenes disponibles</h6>
                                </div>
                                <div class="card-body">
                                    <div class="row" id="imagenesContenidoContainerEditar">
                                        <!-- Las imágenes se cargarán dinámicamente aquí -->
                                    </div>
                                    <div class="form-text mt-2">
                                        Haz clic en una imagen para insertarla centrada en el contenido del post
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-12">
                                <div class="mb-3">
                                    <label for="estadoEditar" class="form-label">Estado *</label>
                                    <select class="form-select" id="estadoEditar" name="id_estado" required>
                                        <option value="">Seleccionar estado...</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <div class="mb-3">
                            <label for="categoriasEditar" class="form-label">Categorías/Etiquetas</label>
                            <select class="form-select" id="categoriasEditar" name="categorias" multiple>
                                <!-- Las categorías se cargarán dinámicamente -->
                            </select>
                            <div class="form-text">Mantén presionado Ctrl (Cmd en Mac) para seleccionar múltiples categorías</div>
                        </div>
                    </div>

                    <div class="modal-footer">
                        <button type="button" class="btn btn-outline-gris" data-bs-dismiss="modal" id="cancelarEditarPostBtn">Cancelar</button>
                        <button type="submit" class="btn btn-cafe">
                            <span class="material-icons me-2">save</span>
                            Guardar Cambios
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Modal para subir imagen -->
    <div class="modal fade" id="subirImagenModal" tabindex="-1" aria-labelledby="subirImagenModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="subirImagenModalLabel" style="color: var(--color-cafe);">Subir Imagen a Posts</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
                </div>
                <form id="subirImagenForm">
                    <div class="modal-body">
                        <div class="mb-3">
                            <label for="nombreImagen" class="form-label">Nombre del archivo *</label>
                            <input type="text" class="form-control" id="nombreImagen" name="nombre" placeholder="Ej: logo, producto-destacado, banner-principal" required>
                            <div class="form-text">El nombre que escribas será el nombre del archivo. Puedes usar letras (mayúsculas y minúsculas), números, espacios y guiones. No incluyas la extensión.</div>
                        </div>
                        <div class="mb-3">
                            <label for="archivoImagen" class="form-label">Seleccionar archivo *</label>
                            <input type="file" class="form-control" id="archivoImagen" name="imagen" accept="image/*" required>
                            <div class="form-text">Formatos permitidos: JPG, PNG, GIF, WebP. Tamaño máximo: 15MB</div>
                        </div>
                        <div id="previewSubidaImagen" class="text-center">
                            <!-- Preview de la imagen se mostrará aquí -->
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-outline-gris" data-bs-dismiss="modal">Cancelar</button>
                        <button type="submit" class="btn btn-cafe">
                            <span class="material-icons me-2">upload</span>
                            Subir a Posts
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Modal de confirmación para eliminar imagen -->
    <div class="modal fade" id="confirmarEliminarImagenModal" tabindex="-1" aria-labelledby="confirmarEliminarImagenModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="confirmarEliminarImagenModalLabel">Eliminar imagen</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
          </div>
          <div class="modal-body">
            <p>La imagen puede estar usándose en un post. ¿Estás seguro de eliminarla?</p>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">No</button>
            <button type="button" class="btn btn-danger" id="confirmarEliminarImagenBtn">Sí, eliminar</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal de confirmación para eliminar etiqueta/categoría -->
    <div class="modal fade" id="confirmarEliminarEtiquetaModal" tabindex="-1" aria-labelledby="confirmarEliminarEtiquetaModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="confirmarEliminarEtiquetaModalLabel">Eliminar etiqueta</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
          </div>
          <div class="modal-body">
            <p>¿Estás seguro de eliminar la etiqueta?</p>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">No</button>
            <button type="button" class="btn btn-danger" id="confirmarEliminarEtiquetaBtn">Sí, eliminar</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal de error para eliminación de categoría en uso -->
    <div class="modal fade" id="errorEliminarCategoriaModal" tabindex="-1" aria-labelledby="errorEliminarCategoriaModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="errorEliminarCategoriaModalLabel">No se puede eliminar la etiqueta</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
          </div>
          <div class="modal-body">
            <p>No se puede eliminar la etiqueta porque está siendo utilizada en uno o más posts.</p>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal de advertencia: imagen usada como principal en un post -->
    <div class="modal fade" id="errorEliminarImagenPrincipalModal" tabindex="-1" aria-labelledby="errorEliminarImagenPrincipalModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="errorEliminarImagenPrincipalModalLabel">No se puede eliminar la imagen</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
          </div>
          <div class="modal-body">
            <p>No se puede eliminar la imagen porque está siendo utilizada como imagen principal de un post.</p>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="config/ngrok-config.js"></script>
    <script src="admin.js"></script>
</body>
</html>
